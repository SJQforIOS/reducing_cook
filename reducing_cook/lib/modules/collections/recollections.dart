import 'package:ecook/common/color_helper.dart';import 'package:ecook/common/screen_info_helper.dart';import 'package:flutter/material.dart';class CollectionVC extends StatefulWidget {  @override  CollectionVCState createState() => CollectionVCState();}const List<String> titleArr = [  "收藏","阅读历史"];//主视图class CollectionVCState extends State<CollectionVC> {  bool isEditIng = false;  //改变编辑状态  void _changeEditStatus() {    setState((){      isEditIng = !isEditIng;    });  }  @override  Widget build(BuildContext context) {    // TODO: implement build    return DefaultTabController(      length: titleArr.length,      child: Scaffold(        appBar: AppBar(          elevation: .0,          backgroundColor: Colors.white,          centerTitle: true,          actions: <Widget>[            GestureDetector(              child: SizedBox(                width: 80,                height: 40,                child: isEditIng ? Center(child: Text(                  "取消",                  style: TextStyle(fontSize: 14, color: ColorHelper.hexStringToColor("#84838B")),                ),) : Image.asset("assets/sc_bj.png"),              ),              onTap: _changeEditStatus,            ),          ],          title: TabBar(            labelPadding: EdgeInsets.fromLTRB(40, 0, 40, 0),            isScrollable: true,            labelColor: ColorHelper.hexStringToColor("#00AD53"),            labelStyle: TextStyle(fontSize: 16, fontWeight: FontWeight.bold),            unselectedLabelColor: ColorHelper.hexStringToColor("#84838B"),            unselectedLabelStyle: TextStyle(fontSize: 16, fontWeight: FontWeight.normal),            indicatorColor: ColorHelper.hexStringToColor("#00AD53"),            indicatorWeight: 3,            indicatorSize: TabBarIndicatorSize.label,            indicatorPadding: EdgeInsets.symmetric(horizontal: 11),            tabs: titleArr.map<Widget>((String title) {              return Tab(                text: title,              );            }).toList(),          ),        ),        body: TabBarView(          children: titleArr.map<Widget>((String title) {            return Padding(              padding: const EdgeInsets.all(8.0),              child: CollectionChildView(editStatus: isEditIng,),            );          }).toList(),        ),      ),    );  }}//子页面class CollectionChildView extends StatelessWidget {  CollectionChildView({Key key, this.editStatus}) : super(key:key);  final bool editStatus;  @override  Widget build(BuildContext context) {    // TODO: implement build    return Column(      mainAxisAlignment: MainAxisAlignment.spaceBetween,      crossAxisAlignment: CrossAxisAlignment.start,      children: <Widget>[        Expanded(          child:  ListView.builder(itemBuilder: (BuildContext context, int index) {            return CollectionCell(editStatus: editStatus);          },            itemCount: 10,            itemExtent: 120,            padding: EdgeInsets.fromLTRB(editStatus ? 0 : 20, 0, 20, 0),          )        ),        if (editStatus) BottomFuctionView()      ],    );  }  Widget BottomFuctionView () {    return Container(      width: REScreenInfo.screenWidth,      height: 62,      decoration: BoxDecoration(        color: Colors.white,      ),      child: Row(        mainAxisAlignment: MainAxisAlignment.spaceBetween,        children: <Widget>[          Container(            width: 46,            height: 62,            child: Image.asset("assets/collection_edit_def.png"),          ),          Container(            width: REScreenInfo.screenWidth-66,            height: 62,            child: Row(              mainAxisAlignment: MainAxisAlignment.spaceBetween,              children: <Widget>[                SizedBox(                  width: 40,                  height: 62,                  child: Center(                    child: Text(                        "全选",                        style: TextStyle(fontSize: 16, color: ColorHelper.hexStringToColor("#1E192F"))),                  ),                ),                SizedBox(                  width: 40,                  height: 62,                  child: Center(                    child: Text(                        "删除",                        style: TextStyle(fontSize: 16, color: ColorHelper.hexStringToColor("#1E192F"))),                  ),                ),              ],            ),          )        ],      ),    );  }}//子页面Cellclass CollectionCell extends StatelessWidget {  CollectionCell({Key key, this.editStatus}) : super(key:key);  final bool editStatus;  @override  Widget build(BuildContext context) {    return Padding(      padding: EdgeInsets.fromLTRB(0, 0, 0, 0),      child: normalView(context),    );  }  Widget normalView (BuildContext context) {    return Row (      children: <Widget>[        if (editStatus) Container(          decoration: BoxDecoration(//            color: ColorHelper.slRandomColor(),          ),          width: 58,          height: 120,          child: Image.asset("assets/collection_edit_def.png"),        ),        SizedBox(          width: 120,          child: AspectRatio(            aspectRatio: 3/2,            child: ClipRRect(              child: FadeInImage.assetNetwork(                placeholder: '',                image: 'https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1591092318435&di=0e9506ef1f66cf917e7d978564c0ba27&imgtype=0&src=http%3A%2F%2Fa0.att.hudong.com%2F64%2F76%2F20300001349415131407760417677.jpg',                fit: BoxFit.cover,              ),              borderRadius: BorderRadius.circular(16),            ),          ),        ),        Expanded(          child: Container(            padding: EdgeInsets.fromLTRB(12, 16, 0, 16),            child: Column(              mainAxisAlignment: MainAxisAlignment.spaceBetween,              crossAxisAlignment: CrossAxisAlignment.start,              children: <Widget>[                Text('美味营养hshsh社会社会时候是黄山市',                  style: TextStyle(                      fontSize: 16,                      color: Color(0xFF1E192F)                  ),                  maxLines: 2,                ),                Text('点赞122   收藏111'),              ],            ),          ),        ),      ],    );  }}